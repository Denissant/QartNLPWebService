{% extends "layouts/base_for_full_pages.html" %}
{% block content %}
    {# ALERT JS #}

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    {# SKELETON CSS #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"
          integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <div class='container' id='tagging-page' style="min-height: 53.5vh">
        <div class='row' style="margin-top: 50px;">
            <div class='twelve columns'>
                <div id='left' style="padding-top: 12px">
                    <div>
                        {% set separators = ['.', ',', '?', '!', ';'] %}

                        {% for word in text.split() %}

                            {% if word[-2] in separators %}

                                <span id="w{{ loop.index }}">{{ word[:-2] }}</span>{{ word[-2:] }}

                            {% elif word[-1] in separators %}

                                <span id="w{{ loop.index }}">{{ word[:-1] }}</span>{{ word[-1] }}

                            {% else %}

                                <span id="w{{ loop.index }}">{{ word }}</span>

                            {% endif %}

                        {% endfor %}

                    </div>

                    <p id='init-json' class="hidden">{{ tags_json }}</p>
                </div>
            </div>
        </div>
    </div>
    {% if file.pages|count > 1 %}
        <div style="margin-top: 120px; display: flex; justify-content: center;">
        {% for i in range(1, 1 + file.pages|count) %}
            <a class="pagination-number {% if page_id == i %} active {% endif %}"
               href="{{ url_for('tagging.tagging', file_id=file.id, page_id=i) }}">{{ i }}</a>
        {% endfor %}
        </div>
    {% endif %}
    <script>
        let allTypes = {{ all_types | safe }};
        const fileID = {{ file_id }};
        const pageID = {{ page_id_str }};
        const backendTags = {{ tags_json | safe }};
        console.log('backendTags:');
        console.log(backendTags);
    </script>
    <script src="{{ url_for("static", filename="JS/tagging-script.js") }}"></script>
{% endblock %}